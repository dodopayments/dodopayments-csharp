using System.Text.Json;
using DodoPayments.Client.Core;
using DodoPayments.Client.Exceptions;
using DodoPayments.Client.Models.Misc;

namespace DodoPayments.Client.Tests.Models.Misc;

public class CountryCodeTest : TestBase
{
    [Theory]
    [InlineData(CountryCode.Af)]
    [InlineData(CountryCode.Ax)]
    [InlineData(CountryCode.Al)]
    [InlineData(CountryCode.Dz)]
    [InlineData(CountryCode.As)]
    [InlineData(CountryCode.Ad)]
    [InlineData(CountryCode.Ao)]
    [InlineData(CountryCode.AI)]
    [InlineData(CountryCode.Aq)]
    [InlineData(CountryCode.Ag)]
    [InlineData(CountryCode.Ar)]
    [InlineData(CountryCode.Am)]
    [InlineData(CountryCode.Aw)]
    [InlineData(CountryCode.Au)]
    [InlineData(CountryCode.At)]
    [InlineData(CountryCode.Az)]
    [InlineData(CountryCode.Bs)]
    [InlineData(CountryCode.Bh)]
    [InlineData(CountryCode.Bd)]
    [InlineData(CountryCode.Bb)]
    [InlineData(CountryCode.By)]
    [InlineData(CountryCode.Be)]
    [InlineData(CountryCode.Bz)]
    [InlineData(CountryCode.Bj)]
    [InlineData(CountryCode.Bm)]
    [InlineData(CountryCode.Bt)]
    [InlineData(CountryCode.Bo)]
    [InlineData(CountryCode.Bq)]
    [InlineData(CountryCode.Ba)]
    [InlineData(CountryCode.Bw)]
    [InlineData(CountryCode.Bv)]
    [InlineData(CountryCode.Br)]
    [InlineData(CountryCode.Io)]
    [InlineData(CountryCode.Bn)]
    [InlineData(CountryCode.Bg)]
    [InlineData(CountryCode.Bf)]
    [InlineData(CountryCode.Bi)]
    [InlineData(CountryCode.Kh)]
    [InlineData(CountryCode.Cm)]
    [InlineData(CountryCode.Ca)]
    [InlineData(CountryCode.Cv)]
    [InlineData(CountryCode.Ky)]
    [InlineData(CountryCode.Cf)]
    [InlineData(CountryCode.Td)]
    [InlineData(CountryCode.Cl)]
    [InlineData(CountryCode.Cn)]
    [InlineData(CountryCode.Cx)]
    [InlineData(CountryCode.Cc)]
    [InlineData(CountryCode.Co)]
    [InlineData(CountryCode.Km)]
    [InlineData(CountryCode.Cg)]
    [InlineData(CountryCode.Cd)]
    [InlineData(CountryCode.Ck)]
    [InlineData(CountryCode.Cr)]
    [InlineData(CountryCode.Ci)]
    [InlineData(CountryCode.Hr)]
    [InlineData(CountryCode.Cu)]
    [InlineData(CountryCode.Cw)]
    [InlineData(CountryCode.Cy)]
    [InlineData(CountryCode.Cz)]
    [InlineData(CountryCode.Dk)]
    [InlineData(CountryCode.Dj)]
    [InlineData(CountryCode.Dm)]
    [InlineData(CountryCode.Do)]
    [InlineData(CountryCode.Ec)]
    [InlineData(CountryCode.Eg)]
    [InlineData(CountryCode.Sv)]
    [InlineData(CountryCode.Gq)]
    [InlineData(CountryCode.Er)]
    [InlineData(CountryCode.Ee)]
    [InlineData(CountryCode.Et)]
    [InlineData(CountryCode.Fk)]
    [InlineData(CountryCode.Fo)]
    [InlineData(CountryCode.Fj)]
    [InlineData(CountryCode.Fi)]
    [InlineData(CountryCode.Fr)]
    [InlineData(CountryCode.Gf)]
    [InlineData(CountryCode.Pf)]
    [InlineData(CountryCode.Tf)]
    [InlineData(CountryCode.Ga)]
    [InlineData(CountryCode.Gm)]
    [InlineData(CountryCode.Ge)]
    [InlineData(CountryCode.De)]
    [InlineData(CountryCode.Gh)]
    [InlineData(CountryCode.Gi)]
    [InlineData(CountryCode.Gr)]
    [InlineData(CountryCode.Gl)]
    [InlineData(CountryCode.Gd)]
    [InlineData(CountryCode.Gp)]
    [InlineData(CountryCode.Gu)]
    [InlineData(CountryCode.Gt)]
    [InlineData(CountryCode.Gg)]
    [InlineData(CountryCode.Gn)]
    [InlineData(CountryCode.Gw)]
    [InlineData(CountryCode.Gy)]
    [InlineData(CountryCode.Ht)]
    [InlineData(CountryCode.Hm)]
    [InlineData(CountryCode.Va)]
    [InlineData(CountryCode.Hn)]
    [InlineData(CountryCode.Hk)]
    [InlineData(CountryCode.Hu)]
    [InlineData(CountryCode.Is)]
    [InlineData(CountryCode.In)]
    [InlineData(CountryCode.ID)]
    [InlineData(CountryCode.Ir)]
    [InlineData(CountryCode.Iq)]
    [InlineData(CountryCode.Ie)]
    [InlineData(CountryCode.Im)]
    [InlineData(CountryCode.Il)]
    [InlineData(CountryCode.It)]
    [InlineData(CountryCode.Jm)]
    [InlineData(CountryCode.Jp)]
    [InlineData(CountryCode.Je)]
    [InlineData(CountryCode.Jo)]
    [InlineData(CountryCode.Kz)]
    [InlineData(CountryCode.Ke)]
    [InlineData(CountryCode.Ki)]
    [InlineData(CountryCode.Kp)]
    [InlineData(CountryCode.Kr)]
    [InlineData(CountryCode.Kw)]
    [InlineData(CountryCode.Kg)]
    [InlineData(CountryCode.La)]
    [InlineData(CountryCode.Lv)]
    [InlineData(CountryCode.Lb)]
    [InlineData(CountryCode.Ls)]
    [InlineData(CountryCode.Lr)]
    [InlineData(CountryCode.Ly)]
    [InlineData(CountryCode.Li)]
    [InlineData(CountryCode.Lt)]
    [InlineData(CountryCode.Lu)]
    [InlineData(CountryCode.Mo)]
    [InlineData(CountryCode.Mk)]
    [InlineData(CountryCode.Mg)]
    [InlineData(CountryCode.Mw)]
    [InlineData(CountryCode.My)]
    [InlineData(CountryCode.Mv)]
    [InlineData(CountryCode.Ml)]
    [InlineData(CountryCode.Mt)]
    [InlineData(CountryCode.Mh)]
    [InlineData(CountryCode.Mq)]
    [InlineData(CountryCode.Mr)]
    [InlineData(CountryCode.Mu)]
    [InlineData(CountryCode.Yt)]
    [InlineData(CountryCode.Mx)]
    [InlineData(CountryCode.Fm)]
    [InlineData(CountryCode.Md)]
    [InlineData(CountryCode.Mc)]
    [InlineData(CountryCode.Mn)]
    [InlineData(CountryCode.Me)]
    [InlineData(CountryCode.Ms)]
    [InlineData(CountryCode.Ma)]
    [InlineData(CountryCode.Mz)]
    [InlineData(CountryCode.Mm)]
    [InlineData(CountryCode.Na)]
    [InlineData(CountryCode.Nr)]
    [InlineData(CountryCode.Np)]
    [InlineData(CountryCode.Nl)]
    [InlineData(CountryCode.Nc)]
    [InlineData(CountryCode.Nz)]
    [InlineData(CountryCode.Ni)]
    [InlineData(CountryCode.Ne)]
    [InlineData(CountryCode.Ng)]
    [InlineData(CountryCode.Nu)]
    [InlineData(CountryCode.Nf)]
    [InlineData(CountryCode.Mp)]
    [InlineData(CountryCode.No)]
    [InlineData(CountryCode.Om)]
    [InlineData(CountryCode.Pk)]
    [InlineData(CountryCode.Pw)]
    [InlineData(CountryCode.Ps)]
    [InlineData(CountryCode.Pa)]
    [InlineData(CountryCode.Pg)]
    [InlineData(CountryCode.Py)]
    [InlineData(CountryCode.Pe)]
    [InlineData(CountryCode.Ph)]
    [InlineData(CountryCode.Pn)]
    [InlineData(CountryCode.Pl)]
    [InlineData(CountryCode.Pt)]
    [InlineData(CountryCode.Pr)]
    [InlineData(CountryCode.Qa)]
    [InlineData(CountryCode.Re)]
    [InlineData(CountryCode.Ro)]
    [InlineData(CountryCode.Ru)]
    [InlineData(CountryCode.Rw)]
    [InlineData(CountryCode.Bl)]
    [InlineData(CountryCode.Sh)]
    [InlineData(CountryCode.Kn)]
    [InlineData(CountryCode.Lc)]
    [InlineData(CountryCode.Mf)]
    [InlineData(CountryCode.Pm)]
    [InlineData(CountryCode.Vc)]
    [InlineData(CountryCode.Ws)]
    [InlineData(CountryCode.Sm)]
    [InlineData(CountryCode.St)]
    [InlineData(CountryCode.Sa)]
    [InlineData(CountryCode.Sn)]
    [InlineData(CountryCode.Rs)]
    [InlineData(CountryCode.Sc)]
    [InlineData(CountryCode.Sl)]
    [InlineData(CountryCode.Sg)]
    [InlineData(CountryCode.Sx)]
    [InlineData(CountryCode.Sk)]
    [InlineData(CountryCode.Si)]
    [InlineData(CountryCode.Sb)]
    [InlineData(CountryCode.So)]
    [InlineData(CountryCode.Za)]
    [InlineData(CountryCode.Gs)]
    [InlineData(CountryCode.SS)]
    [InlineData(CountryCode.Es)]
    [InlineData(CountryCode.Lk)]
    [InlineData(CountryCode.Sd)]
    [InlineData(CountryCode.Sr)]
    [InlineData(CountryCode.Sj)]
    [InlineData(CountryCode.Sz)]
    [InlineData(CountryCode.Se)]
    [InlineData(CountryCode.Ch)]
    [InlineData(CountryCode.Sy)]
    [InlineData(CountryCode.Tw)]
    [InlineData(CountryCode.Tj)]
    [InlineData(CountryCode.Tz)]
    [InlineData(CountryCode.Th)]
    [InlineData(CountryCode.Tl)]
    [InlineData(CountryCode.Tg)]
    [InlineData(CountryCode.Tk)]
    [InlineData(CountryCode.To)]
    [InlineData(CountryCode.Tt)]
    [InlineData(CountryCode.Tn)]
    [InlineData(CountryCode.Tr)]
    [InlineData(CountryCode.Tm)]
    [InlineData(CountryCode.Tc)]
    [InlineData(CountryCode.Tv)]
    [InlineData(CountryCode.Ug)]
    [InlineData(CountryCode.Ua)]
    [InlineData(CountryCode.Ae)]
    [InlineData(CountryCode.GB)]
    [InlineData(CountryCode.Um)]
    [InlineData(CountryCode.Us)]
    [InlineData(CountryCode.Uy)]
    [InlineData(CountryCode.Uz)]
    [InlineData(CountryCode.Vu)]
    [InlineData(CountryCode.Ve)]
    [InlineData(CountryCode.Vn)]
    [InlineData(CountryCode.Vg)]
    [InlineData(CountryCode.Vi)]
    [InlineData(CountryCode.Wf)]
    [InlineData(CountryCode.Eh)]
    [InlineData(CountryCode.Ye)]
    [InlineData(CountryCode.Zm)]
    [InlineData(CountryCode.Zw)]
    public void Validation_Works(CountryCode rawValue)
    {
        // force implicit conversion because Theory can't do that for us
        ApiEnum<string, CountryCode> value = rawValue;
        value.Validate();
    }

    [Fact]
    public void InvalidEnumValidationThrows_Works()
    {
        var value = JsonSerializer.Deserialize<ApiEnum<string, CountryCode>>(
            JsonSerializer.Deserialize<JsonElement>("\"invalid value\""),
            ModelBase.SerializerOptions
        );

        Assert.NotNull(value);
        Assert.Throws<DodoPaymentsInvalidDataException>(() => value.Validate());
    }

    [Theory]
    [InlineData(CountryCode.Af)]
    [InlineData(CountryCode.Ax)]
    [InlineData(CountryCode.Al)]
    [InlineData(CountryCode.Dz)]
    [InlineData(CountryCode.As)]
    [InlineData(CountryCode.Ad)]
    [InlineData(CountryCode.Ao)]
    [InlineData(CountryCode.AI)]
    [InlineData(CountryCode.Aq)]
    [InlineData(CountryCode.Ag)]
    [InlineData(CountryCode.Ar)]
    [InlineData(CountryCode.Am)]
    [InlineData(CountryCode.Aw)]
    [InlineData(CountryCode.Au)]
    [InlineData(CountryCode.At)]
    [InlineData(CountryCode.Az)]
    [InlineData(CountryCode.Bs)]
    [InlineData(CountryCode.Bh)]
    [InlineData(CountryCode.Bd)]
    [InlineData(CountryCode.Bb)]
    [InlineData(CountryCode.By)]
    [InlineData(CountryCode.Be)]
    [InlineData(CountryCode.Bz)]
    [InlineData(CountryCode.Bj)]
    [InlineData(CountryCode.Bm)]
    [InlineData(CountryCode.Bt)]
    [InlineData(CountryCode.Bo)]
    [InlineData(CountryCode.Bq)]
    [InlineData(CountryCode.Ba)]
    [InlineData(CountryCode.Bw)]
    [InlineData(CountryCode.Bv)]
    [InlineData(CountryCode.Br)]
    [InlineData(CountryCode.Io)]
    [InlineData(CountryCode.Bn)]
    [InlineData(CountryCode.Bg)]
    [InlineData(CountryCode.Bf)]
    [InlineData(CountryCode.Bi)]
    [InlineData(CountryCode.Kh)]
    [InlineData(CountryCode.Cm)]
    [InlineData(CountryCode.Ca)]
    [InlineData(CountryCode.Cv)]
    [InlineData(CountryCode.Ky)]
    [InlineData(CountryCode.Cf)]
    [InlineData(CountryCode.Td)]
    [InlineData(CountryCode.Cl)]
    [InlineData(CountryCode.Cn)]
    [InlineData(CountryCode.Cx)]
    [InlineData(CountryCode.Cc)]
    [InlineData(CountryCode.Co)]
    [InlineData(CountryCode.Km)]
    [InlineData(CountryCode.Cg)]
    [InlineData(CountryCode.Cd)]
    [InlineData(CountryCode.Ck)]
    [InlineData(CountryCode.Cr)]
    [InlineData(CountryCode.Ci)]
    [InlineData(CountryCode.Hr)]
    [InlineData(CountryCode.Cu)]
    [InlineData(CountryCode.Cw)]
    [InlineData(CountryCode.Cy)]
    [InlineData(CountryCode.Cz)]
    [InlineData(CountryCode.Dk)]
    [InlineData(CountryCode.Dj)]
    [InlineData(CountryCode.Dm)]
    [InlineData(CountryCode.Do)]
    [InlineData(CountryCode.Ec)]
    [InlineData(CountryCode.Eg)]
    [InlineData(CountryCode.Sv)]
    [InlineData(CountryCode.Gq)]
    [InlineData(CountryCode.Er)]
    [InlineData(CountryCode.Ee)]
    [InlineData(CountryCode.Et)]
    [InlineData(CountryCode.Fk)]
    [InlineData(CountryCode.Fo)]
    [InlineData(CountryCode.Fj)]
    [InlineData(CountryCode.Fi)]
    [InlineData(CountryCode.Fr)]
    [InlineData(CountryCode.Gf)]
    [InlineData(CountryCode.Pf)]
    [InlineData(CountryCode.Tf)]
    [InlineData(CountryCode.Ga)]
    [InlineData(CountryCode.Gm)]
    [InlineData(CountryCode.Ge)]
    [InlineData(CountryCode.De)]
    [InlineData(CountryCode.Gh)]
    [InlineData(CountryCode.Gi)]
    [InlineData(CountryCode.Gr)]
    [InlineData(CountryCode.Gl)]
    [InlineData(CountryCode.Gd)]
    [InlineData(CountryCode.Gp)]
    [InlineData(CountryCode.Gu)]
    [InlineData(CountryCode.Gt)]
    [InlineData(CountryCode.Gg)]
    [InlineData(CountryCode.Gn)]
    [InlineData(CountryCode.Gw)]
    [InlineData(CountryCode.Gy)]
    [InlineData(CountryCode.Ht)]
    [InlineData(CountryCode.Hm)]
    [InlineData(CountryCode.Va)]
    [InlineData(CountryCode.Hn)]
    [InlineData(CountryCode.Hk)]
    [InlineData(CountryCode.Hu)]
    [InlineData(CountryCode.Is)]
    [InlineData(CountryCode.In)]
    [InlineData(CountryCode.ID)]
    [InlineData(CountryCode.Ir)]
    [InlineData(CountryCode.Iq)]
    [InlineData(CountryCode.Ie)]
    [InlineData(CountryCode.Im)]
    [InlineData(CountryCode.Il)]
    [InlineData(CountryCode.It)]
    [InlineData(CountryCode.Jm)]
    [InlineData(CountryCode.Jp)]
    [InlineData(CountryCode.Je)]
    [InlineData(CountryCode.Jo)]
    [InlineData(CountryCode.Kz)]
    [InlineData(CountryCode.Ke)]
    [InlineData(CountryCode.Ki)]
    [InlineData(CountryCode.Kp)]
    [InlineData(CountryCode.Kr)]
    [InlineData(CountryCode.Kw)]
    [InlineData(CountryCode.Kg)]
    [InlineData(CountryCode.La)]
    [InlineData(CountryCode.Lv)]
    [InlineData(CountryCode.Lb)]
    [InlineData(CountryCode.Ls)]
    [InlineData(CountryCode.Lr)]
    [InlineData(CountryCode.Ly)]
    [InlineData(CountryCode.Li)]
    [InlineData(CountryCode.Lt)]
    [InlineData(CountryCode.Lu)]
    [InlineData(CountryCode.Mo)]
    [InlineData(CountryCode.Mk)]
    [InlineData(CountryCode.Mg)]
    [InlineData(CountryCode.Mw)]
    [InlineData(CountryCode.My)]
    [InlineData(CountryCode.Mv)]
    [InlineData(CountryCode.Ml)]
    [InlineData(CountryCode.Mt)]
    [InlineData(CountryCode.Mh)]
    [InlineData(CountryCode.Mq)]
    [InlineData(CountryCode.Mr)]
    [InlineData(CountryCode.Mu)]
    [InlineData(CountryCode.Yt)]
    [InlineData(CountryCode.Mx)]
    [InlineData(CountryCode.Fm)]
    [InlineData(CountryCode.Md)]
    [InlineData(CountryCode.Mc)]
    [InlineData(CountryCode.Mn)]
    [InlineData(CountryCode.Me)]
    [InlineData(CountryCode.Ms)]
    [InlineData(CountryCode.Ma)]
    [InlineData(CountryCode.Mz)]
    [InlineData(CountryCode.Mm)]
    [InlineData(CountryCode.Na)]
    [InlineData(CountryCode.Nr)]
    [InlineData(CountryCode.Np)]
    [InlineData(CountryCode.Nl)]
    [InlineData(CountryCode.Nc)]
    [InlineData(CountryCode.Nz)]
    [InlineData(CountryCode.Ni)]
    [InlineData(CountryCode.Ne)]
    [InlineData(CountryCode.Ng)]
    [InlineData(CountryCode.Nu)]
    [InlineData(CountryCode.Nf)]
    [InlineData(CountryCode.Mp)]
    [InlineData(CountryCode.No)]
    [InlineData(CountryCode.Om)]
    [InlineData(CountryCode.Pk)]
    [InlineData(CountryCode.Pw)]
    [InlineData(CountryCode.Ps)]
    [InlineData(CountryCode.Pa)]
    [InlineData(CountryCode.Pg)]
    [InlineData(CountryCode.Py)]
    [InlineData(CountryCode.Pe)]
    [InlineData(CountryCode.Ph)]
    [InlineData(CountryCode.Pn)]
    [InlineData(CountryCode.Pl)]
    [InlineData(CountryCode.Pt)]
    [InlineData(CountryCode.Pr)]
    [InlineData(CountryCode.Qa)]
    [InlineData(CountryCode.Re)]
    [InlineData(CountryCode.Ro)]
    [InlineData(CountryCode.Ru)]
    [InlineData(CountryCode.Rw)]
    [InlineData(CountryCode.Bl)]
    [InlineData(CountryCode.Sh)]
    [InlineData(CountryCode.Kn)]
    [InlineData(CountryCode.Lc)]
    [InlineData(CountryCode.Mf)]
    [InlineData(CountryCode.Pm)]
    [InlineData(CountryCode.Vc)]
    [InlineData(CountryCode.Ws)]
    [InlineData(CountryCode.Sm)]
    [InlineData(CountryCode.St)]
    [InlineData(CountryCode.Sa)]
    [InlineData(CountryCode.Sn)]
    [InlineData(CountryCode.Rs)]
    [InlineData(CountryCode.Sc)]
    [InlineData(CountryCode.Sl)]
    [InlineData(CountryCode.Sg)]
    [InlineData(CountryCode.Sx)]
    [InlineData(CountryCode.Sk)]
    [InlineData(CountryCode.Si)]
    [InlineData(CountryCode.Sb)]
    [InlineData(CountryCode.So)]
    [InlineData(CountryCode.Za)]
    [InlineData(CountryCode.Gs)]
    [InlineData(CountryCode.SS)]
    [InlineData(CountryCode.Es)]
    [InlineData(CountryCode.Lk)]
    [InlineData(CountryCode.Sd)]
    [InlineData(CountryCode.Sr)]
    [InlineData(CountryCode.Sj)]
    [InlineData(CountryCode.Sz)]
    [InlineData(CountryCode.Se)]
    [InlineData(CountryCode.Ch)]
    [InlineData(CountryCode.Sy)]
    [InlineData(CountryCode.Tw)]
    [InlineData(CountryCode.Tj)]
    [InlineData(CountryCode.Tz)]
    [InlineData(CountryCode.Th)]
    [InlineData(CountryCode.Tl)]
    [InlineData(CountryCode.Tg)]
    [InlineData(CountryCode.Tk)]
    [InlineData(CountryCode.To)]
    [InlineData(CountryCode.Tt)]
    [InlineData(CountryCode.Tn)]
    [InlineData(CountryCode.Tr)]
    [InlineData(CountryCode.Tm)]
    [InlineData(CountryCode.Tc)]
    [InlineData(CountryCode.Tv)]
    [InlineData(CountryCode.Ug)]
    [InlineData(CountryCode.Ua)]
    [InlineData(CountryCode.Ae)]
    [InlineData(CountryCode.GB)]
    [InlineData(CountryCode.Um)]
    [InlineData(CountryCode.Us)]
    [InlineData(CountryCode.Uy)]
    [InlineData(CountryCode.Uz)]
    [InlineData(CountryCode.Vu)]
    [InlineData(CountryCode.Ve)]
    [InlineData(CountryCode.Vn)]
    [InlineData(CountryCode.Vg)]
    [InlineData(CountryCode.Vi)]
    [InlineData(CountryCode.Wf)]
    [InlineData(CountryCode.Eh)]
    [InlineData(CountryCode.Ye)]
    [InlineData(CountryCode.Zm)]
    [InlineData(CountryCode.Zw)]
    public void SerializationRoundtrip_Works(CountryCode rawValue)
    {
        // force implicit conversion because Theory can't do that for us
        ApiEnum<string, CountryCode> value = rawValue;

        string json = JsonSerializer.Serialize(value, ModelBase.SerializerOptions);
        var deserialized = JsonSerializer.Deserialize<ApiEnum<string, CountryCode>>(
            json,
            ModelBase.SerializerOptions
        );

        Assert.Equal(value, deserialized);
    }

    [Fact]
    public void InvalidEnumSerializationRoundtrip_Works()
    {
        var value = JsonSerializer.Deserialize<ApiEnum<string, CountryCode>>(
            JsonSerializer.Deserialize<JsonElement>("\"invalid value\""),
            ModelBase.SerializerOptions
        );
        string json = JsonSerializer.Serialize(value, ModelBase.SerializerOptions);
        var deserialized = JsonSerializer.Deserialize<ApiEnum<string, CountryCode>>(
            json,
            ModelBase.SerializerOptions
        );

        Assert.Equal(value, deserialized);
    }
}
